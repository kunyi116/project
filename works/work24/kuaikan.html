<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/kuankan.css">
    <link rel="stylesheet" href="https://3.swiper.com.cn/dist/css/swiper.min.css">
    <title>Document</title>
    
</head>
<body>
    <div class="serch">
        <img class="logo" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/logo.9fb4c38.png" alt="">
        <a href="">
            <img src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/search_icon.8cb94f3.png" alt="">
            <span>搜索作者名</span>
        </a>
        <div class="sj">
            <img src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/booklist_icon.40fddad.png" alt="">
            <span>书架</span>
        </div>
    </div>
    <ul class="nav">
        <li><span>发现</span></li>
        <li><span>推荐</span></li>
        <li><span>世界</span></li>
    </ul>
     <div class="swiper-container carousel-container">
        <div class="swiper-wrapper carousel-slides">
            <!-- <div class="swiper-slide">Slide 1</div> -->
            
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
        
        
    </div>

    <!-- <div class="carousel-container">
        <div class="carousel-slides">
            <div class="slide" style="background-image: url('https://f2.kkmh.com/image/240726/WtByuYdqH.png-t.w720.webp.h');"></div>
            
        </div>
        <div class="carousel-indicators">
            <span class="indicator active"></span>
            <span class="indicator"></span>
            <span class="indicator"></span>
            <span class="indicator"></span>
            <span class="indicator"></span>
        </div>
    </div> -->
    <ul class="entry">
    </ul>
    <div class="xuanran-box">
        <!-- <div class="xuan-box">
            <div class="reco">
                <h3 class="title">
                    为你推荐
                </h3>
                <ul class="reco-lists">
                    <li>
                    <img src="https://hs1-f2.v3mh.com/image/231110/iv8AcsGT9.webp-t.w320.webp.h" alt="">
                    <p class="p1">我就想蹭你的气运</p>
                    <p class="p2">重生 逆袭 青春</p>
                    <span class="guanzhu">125万关注</span>
                </li>
                </ul>
            </div>
            <div class="btn-box">
                <div class="more">
                    <span>查看更多</span>
                </div>
                <div class="change">
                    <span>换一换</span>
                </div>
            </div>
        </div> -->
    </div>
    <div class="bottom-box">
        <div class="bottom-content">
            <img class="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAHlBMVEUAAACfn5+cnJybm5uampqampqampqZmZmampqZmZlm8TDGAAAACXRSTlMACENXg6v8/f12BRgcAAAAnUlEQVQ4y2NgGAmA0VUBwWEKEYCzWWYmIyTMZjrA2awzpxnA2MyZMwMQujMRWsxmTlNA1g7TwpyJbCwS1wzJVGQ+mgaEALoGmAiGBpgQpgaIGBYNEC3YNIC0zKjEogGsBasGBgaLmTOLsQa++cyZzQykGGU2c3onNstxOheXB3EGCa5AxBnsuCIKZ9TiSgw4kw/OBIczieJM1MMZAAB+x08p/mLdxAAAAABJRU5ErkJggg==" alt="">
            <img class="bottom-img" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/logo.9fb4c38.png" alt="">
            <div class="text">
                <p class="bottom-title">快看漫画APP</p>
                <p class="bottom-intro">快看！你的漫画乐园</p>
            </div>
            <div class="opennow">
                <span>立即打开</span>
            </div>
        </div>
        <div class="bottom-content">
            <img class="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAHlBMVEUAAACfn5+cnJybm5uampqampqampqZmZmampqZmZlm8TDGAAAACXRSTlMACENXg6v8/f12BRgcAAAAnUlEQVQ4y2NgGAmA0VUBwWEKEYCzWWYmIyTMZjrA2awzpxnA2MyZMwMQujMRWsxmTlNA1g7TwpyJbCwS1wzJVGQ+mgaEALoGmAiGBpgQpgaIGBYNEC3YNIC0zKjEogGsBasGBgaLmTOLsQa++cyZzQykGGU2c3onNstxOheXB3EGCa5AxBnsuCIKZ9TiSgw4kw/OBIczieJM1MMZAAB+x08p/mLdxAAAAABJRU5ErkJggg==" alt="">
            <img class="bottom-img" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/ttcbz.d06247d.png" alt="">
            <div class="text">
                <p class="bottom-title">《偷偷藏不住》独家上线</p>
                <p class="bottom-intro">去爱一个人，不顾所有>></p>
            </div>
            <div class="opennow">
                <span>立即打开</span>
            </div>
        </div>
        <div class="bottom-content">
            <img class="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAHlBMVEUAAACfn5+cnJybm5uampqampqampqZmZmampqZmZlm8TDGAAAACXRSTlMACENXg6v8/f12BRgcAAAAnUlEQVQ4y2NgGAmA0VUBwWEKEYCzWWYmIyTMZjrA2awzpxnA2MyZMwMQujMRWsxmTlNA1g7TwpyJbCwS1wzJVGQ+mgaEALoGmAiGBpgQpgaIGBYNEC3YNIC0zKjEogGsBasGBgaLmTOLsQa++cyZzQykGGU2c3onNstxOheXB3EGCa5AxBnsuCIKZ9TiSgw4kw/OBIczieJM1MMZAAB+x08p/mLdxAAAAABJRU5ErkJggg==" alt="">
            <img class="bottom-img" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/zdyn.6475c24.png" alt="">
            <div class="text">
                <p class="bottom-title">《再度与你》</p>
                <p class="bottom-intro">晗旭L-Mo新作，独家呈现>></p>
            </div>
            <div class="opennow">
                <span>立即打开</span>
            </div>
        </div>
        <div class="bottom-content">
            <img class="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAHlBMVEUAAACfn5+cnJybm5uampqampqampqZmZmampqZmZlm8TDGAAAACXRSTlMACENXg6v8/f12BRgcAAAAnUlEQVQ4y2NgGAmA0VUBwWEKEYCzWWYmIyTMZjrA2awzpxnA2MyZMwMQujMRWsxmTlNA1g7TwpyJbCwS1wzJVGQ+mgaEALoGmAiGBpgQpgaIGBYNEC3YNIC0zKjEogGsBasGBgaLmTOLsQa++cyZzQykGGU2c3onNstxOheXB3EGCa5AxBnsuCIKZ9TiSgw4kw/OBIczieJM1MMZAAB+x08p/mLdxAAAAABJRU5ErkJggg==" alt="">
            <img class="bottom-img" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/wtmdfp.d990535.png" alt="">
            <div class="text">
                <p class="bottom-title">《我！天命大反派》</p>
                <p class="bottom-intro">一朝穿越玄幻界，上天要我做反派！</p>
            </div>
            <div class="opennow">
                <span>立即打开</span>
            </div>
        </div>
        <div class="bottom-content">
            <img class="close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAHlBMVEUAAACfn5+cnJybm5uampqampqampqZmZmampqZmZlm8TDGAAAACXRSTlMACENXg6v8/f12BRgcAAAAnUlEQVQ4y2NgGAmA0VUBwWEKEYCzWWYmIyTMZjrA2awzpxnA2MyZMwMQujMRWsxmTlNA1g7TwpyJbCwS1wzJVGQ+mgaEALoGmAiGBpgQpgaIGBYNEC3YNIC0zKjEogGsBasGBgaLmTOLsQa++cyZzQykGGU2c3onNstxOheXB3EGCa5AxBnsuCIKZ9TiSgw4kw/OBIczieJM1MMZAAB+x08p/mLdxAAAAABJRU5ErkJggg==" alt="">
            <img class="bottom-img" src="https://static3w.kuaikanmanhua.com/_nuxt/static-kkfront-mobile/image/logo.9fb4c38.png" alt="">
            <div class="text">
                <p class="bottom-title">快看漫画APP</p>
                <p class="bottom-intro">快看！你的漫画乐园</p>
            </div>
            <div class="opennow">
                <span>立即打开</span>
            </div>
        </div>
    </div>
    
</body>
<script src="./js/reset.js"></script>
<script src="./js/xuan.js"></script>
<script src="https://3.swiper.com.cn/dist/js/swiper.min.js"></script>
<script>
 var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        slidesPerView: 1,
        paginationClickable: true,
        spaceBetween: 0,
        loop: true,
        centeredSlides: true,
        autoplay: 2500,
        autoplayDisableOnInteraction: false
    });
</script>
<script>
(function(doc, win) {
    // 响应式根元素计算
    var docEl = doc.documentElement,
        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        carouselInitialized = false,
        carouselState = {
            bottomBox: null,
            contents: null,
            contentWidth: 0,
            currentIndex: 0,
            intervalTime: 2000,
            autoPlayInterval: null,
            isAnimating: false
        };

    function recalc() {
        var clientWidth = docEl.clientWidth;
        if (!clientWidth) return;
        docEl.style.fontSize = 40 * (clientWidth / 750) + 'px';
        
        if (carouselInitialized) {
            updateCarouselLayout();
        } else {
            initCarousel();
        }
    }

    function initCarousel() {
        carouselState.bottomBox = document.querySelector('.bottom-box');
        carouselState.contents = document.querySelectorAll('.bottom-content');
        
        // 克隆第一个元素并添加到末尾
        var firstClone = carouselState.contents[0].cloneNode(true);
        carouselState.bottomBox.appendChild(firstClone);
        carouselState.contents = document.querySelectorAll('.bottom-content');
        
        updateCarouselLayout();
        startAutoPlay();
        
        carouselInitialized = true;
    }

    function updateCarouselLayout() {
        // 获取当前rem对应的px值
        var remInPx = parseFloat(getComputedStyle(document.documentElement).fontSize);
        
        // 计算内容宽度 (18.75rem)
        carouselState.contentWidth = 18.75 * remInPx;
        
        // 设置容器宽度（包括克隆元素）
        carouselState.bottomBox.style.width = `${carouselState.contents.length * carouselState.contentWidth}px`;
        
        // 设置每个内容的宽度
        carouselState.contents.forEach(content => {
            content.style.width = `${carouselState.contentWidth}px`;
        });
        
        // 更新位置
        updateCarouselPosition();
    }

    function updateCarouselPosition() {
        if (carouselState.isAnimating) return;
        
        carouselState.bottomBox.style.transition = 'transform 0.5s ease';
        carouselState.bottomBox.style.transform = `translateX(${-carouselState.currentIndex * carouselState.contentWidth}px)`;
    }

    function seamlessReset() {
        carouselState.isAnimating = true;
        
        // 禁用过渡效果
        carouselState.bottomBox.style.transition = 'none';
        carouselState.currentIndex = 0;
        carouselState.bottomBox.style.transform = `translateX(0)`;
        
        // 强制重绘
        carouselState.bottomBox.offsetHeight;
        
        // 恢复过渡效果
        carouselState.bottomBox.style.transition = 'transform 0.5s ease';
        carouselState.isAnimating = false;
    }

    function nextSlide() {
        if (carouselState.isAnimating) return;
        
        carouselState.currentIndex++;
        
        if (carouselState.currentIndex === carouselState.contents.length - 1) {
            // 正常滑动到克隆的第一个元素
            updateCarouselPosition();
            
            // 滑动完成后立即无动画重置
            setTimeout(seamlessReset, 500);
        } else {
            updateCarouselPosition();
        }
    }

    function startAutoPlay() {
        stopAutoPlay();
        carouselState.autoPlayInterval = setInterval(nextSlide, carouselState.intervalTime);
    }

    function stopAutoPlay() {
        if (carouselState.autoPlayInterval) {
            clearInterval(carouselState.autoPlayInterval);
        }
    }

    // 初始化
    if (!doc.addEventListener) return;
    win.addEventListener(resizeEvt, recalc, false);
    doc.addEventListener('DOMContentLoaded', recalc, false);
})(document, window);
</script>
</html>