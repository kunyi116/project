document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.book-list');
    const slides = document.querySelectorAll('.swipper-content');
    const prevBtn = document.querySelector('.last-page');
    const nextBtn = document.querySelector('.next-page');
    
    let currentIndex = 0;
    const slideWidth = 1200; // 与CSS中设置的宽度一致
    
    // 初始化轮播
    function initCarousel() {
        // 设置容器样式
        container.style.position = 'relative';
        container.style.overflow = 'hidden';
        
        // 设置每个幻灯片的位置和尺寸
        slides.forEach((slide, index) => {
            slide.style.position = 'absolute';
            slide.style.left = '0';
            slide.style.top = '0';
            slide.style.width = `${slideWidth}px`;
            slide.style.height = '326px';
            slide.style.transform = `translateX(${index * slideWidth}px)`;
            slide.style.transition = 'transform 0.5s ease-in-out';
            slide.style.opacity = '1'; // 确保所有幻灯片都可见
        });
    }
    
    // 更新轮播位置
    function updateCarousel() {
        slides.forEach((slide, index) => {
            const offset = (index - currentIndex) * slideWidth;
            slide.style.transform = `translateX(${offset}px)`;
        });
    }
    
    // 上一页
    prevBtn.addEventListener('click', function() {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        updateCarousel();
    });
    
    // 下一页
    nextBtn.addEventListener('click', function() {
        currentIndex = (currentIndex + 1) % slides.length;
        updateCarousel();
    });
    
    // 初始化
    initCarousel();
});